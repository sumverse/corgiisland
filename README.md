[Uploading 코기섬_구현문서.md…]()
# 코기섬(CorgiIsland) 웹사이트 구현 문서

## 📋 목차
1. [프로젝트 개요](#프로젝트-개요)
2. [기술 스택](#기술-스택)
3. [파일 구조](#파일-구조)
4. [주요 기능](#주요-기능)
5. [페이지별 상세 설명](#페이지별-상세-설명)
6. [디자인 시스템](#디자인-시스템)
7. [반응형 구현](#반응형-구현)
8. [데이터베이스 구조](#데이터베이스-구조)

---

## 프로젝트 개요

**코기섬(CorgiIsland)**은 웰시코기 보호자들을 위한 커뮤니티 웹사이트입니다.

### 주요 목적
- 웰시코기 보호자들 간의 소통 공간 제공
- 코기 사진 공유 및 투표 기능
- 육아 정보 교환 게시판
- 반려견 성향 테스트 제공

### 사이트 정보
- **사이트명**: 코기섬 (CorgiIsland)
- **슬로건**: 웰시코기 보호자 커뮤니티
- **기본 URL**: `http://localhost/corgiisland/`
- **데이터베이스**: `corgitalk`
- **문의**: wpqtqwqq8877@naver.com | 010-2547-1299

---

## 기술 스택

### Backend
- **언어**: PHP 7.4+
- **데이터베이스**: MySQL (mysqli)
- **세션 관리**: PHP Sessions

### Frontend
- **HTML5**: 시맨틱 마크업
- **CSS3**: Flexbox, Grid, Animations
- **JavaScript**: ES6+, Vanilla JS
- **애니메이션**: Lottie (Moving Grass, Cute Doggie)

### 보안
- **XSS 방지**: htmlspecialchars() 사용
- **SQL Injection 방지**: Prepared Statements
- **비밀번호 암호화**: password_hash() (bcrypt)

---

## 파일 구조

```
corgiisland/
├── PHP 파일
│   ├── config.php              # 설정 및 공통 함수
│   ├── index.php               # 메인 페이지
│   ├── login.php               # 로그인
│   ├── logout.php              # 로그아웃
│   ├── register.php            # 회원가입
│   ├── board.php               # 코기talk 게시판
│   ├── butt.php                # 엉덩코기 MVP
│   ├── gallery.php             # 코기갤러리
│   └── test.php                # 코기테스트
│
├── JavaScript
│   └── corgiisland.js          # 통합 JavaScript
│
├── CSS
│   ├── common.css              # 공통 스타일
│   ├── auth.css                # 인증 페이지
│   ├── index.css               # 메인 페이지
│   ├── board.css               # 게시판
│   ├── butt.css                # 엉덩코기
│   ├── gallery.css             # 갤러리
│   └── test.css                # 테스트
│
├── 폰트
│   ├── Gumi.woff2
│   └── GumiRomance.woff2
│
├── 애니메이션
│   ├── lottie/
│   │   ├── Moving_Grass.json
│   │   └── Cute_Doggie.json
│
└── 업로드
    └── uploads/                # 업로드 파일 저장
```

---

## 주요 기능

### 1. 회원 인증 시스템
- ✅ 회원가입
  - 이메일 중복 체크
  - 닉네임 중복 체크
  - 비밀번호 확인 실시간 검증
  - 6자 이상 비밀번호 요구
- ✅ 로그인
  - 세션 기반 인증
  - 비밀번호 암호화 검증
- ✅ 로그아웃
  - 세션 초기화

### 2. 엉덩코기 MVP 🏆
- 📸 코기 엉덩이 사진 업로드
- ❤️ 좋아요 투표 기능
- 🏆 주간 순위 시스템 (1~6위)
- 🥇 메달 배지 (금, 은, 동)
- 💬 댓글 기능
- 🔍 상세보기 페이지

### 3. 코기talk 게시판 📋
- 📝 게시글 작성
  - 제목, 내용
  - 이미지 첨부
  - 제품 카테고리 선택
  - 코기 연결 (선택)
- 💬 댓글 시스템
- 🔍 검색 및 필터링
  - 카테고리별 필터
  - 키워드 검색
- 👁️ 조회수 카운팅
- 📱 이미지 썸네일 표시

### 4. 코기갤러리 🖼️
- 📷 사진 업로드
  - 최대 5MB 제한
  - jpg, png, gif 지원
- 💖 좋아요 기능
- 💬 댓글 시스템
- 📱 3열 그리드 레이아웃
- 🔍 상세보기 페이지

### 5. 코기테스트 🧪
- 🎯 3가지 테스트 제공
  1. 애착 유형 테스트
  2. 코기 MBTI 테스트
  3. 보호자 유형 테스트
- 📊 결과 분석 및 피드백
- 🔄 재시도 기능
- 🎨 테스트별 이미지 슬라이더

---

## 페이지별 상세 설명

### 🏠 메인 페이지 (index.php)

#### 화면 구성
1. **헤더**
   - Lottie 잔디 배경 애니메이션
   - 달리는 코기 애니메이션
   - 로고
   - 환영 메시지
   - 로그아웃 버튼

2. **네비게이션**
   - 홈 / 엉덩코기 / 코기talk / 코기갤러리 / 코기테스트
   - 모바일: 햄버거 메뉴

3. **컨텐츠 섹션**

   **A. 엉덩코기 이번주 MVP (상위 3개)**
   - 좋아요 수 기준 정렬
   - 순위 배지 표시 (🥇🥈🥉)
   - 3열 그리드 레이아웃
   - 클릭 시 엉덩코기 페이지로 이동

   **B. 코기talk 최신글 (3개)**
   - 목록형 레이아웃
   - 이미지 썸네일 (150x150px)
   - 카테고리 표시
   - 제목 및 내용 미리보기 (100자)
   - 작성자, 날짜, 조회수 표시

   **C. 코기갤러리 최신글 (3개)**
   - 3열 그리드
   - 정사각형 이미지
   - 작성자 및 좋아요 수

   **D. 코기테스트 슬라이더**
   - 3개 테스트 이미지
   - 자동 슬라이드 (5초)
   - 이전/다음 버튼
   - 인디케이터 점
   - Overlay 설명 텍스트

4. **푸터**
   - Lottie 잔디 배경
   - 달리는 코기 애니메이션
   - 사이트 정보
   - 연락처
   - 저작권 정보

---

### 🔐 인증 페이지

#### 로그인 (login.php)
**화면 구성**
- 중앙 정렬 카드 UI
- 사이트 로고 및 슬로건
- 이메일 입력
- 비밀번호 입력
- 로그인 버튼
- 이메일 찾기 / 비밀번호 찾기 링크
- 회원가입 링크

**기능**
- 세션 기반 인증
- 비밀번호 암호화 검증
- 에러 메시지 표시

**디자인 특징**
- 점무늬 배경 (하늘색)
- 흰색 카드 UI
- Lottie 애니메이션 숨김
- 반응형 레이아웃

#### 회원가입 (register.php)
**입력 필드**
- 이름 (실명)
- 닉네임 (게시판 표시용)
- 이메일
- 비밀번호
- 비밀번호 확인

**검증 기능**
- 이메일 형식 검증
- 이메일 중복 확인
- 닉네임 중복 확인
- 비밀번호 6자 이상
- 비밀번호 일치 실시간 확인
  - ✓ 일치 (녹색 메시지)
  - ✗ 불일치 (빨간색 메시지)

---

### 🍑 엉덩코기 (butt.php)

#### 목록 페이지
**레이아웃**
- 3x2 그리드 (6개 표시)
- 순위별 정렬 (1위~6위)
- CSS order를 통한 순서 조정

**카드 구성**
- 순위 배지 (좌측 상단)
  - 🥇 1등
  - 🥈 2등
  - 🥉 3등
- 정사각형 이미지
- 코기 이름 (크게, 진하게)
- 사용자 닉네임 (작게, 연하게)
- 캡션 (2줄 말줄임)
- 좋아요 수

**기능**
- 사진 올리기 버튼 (모달)
- 좋아요 클릭 (애니메이션)
- 상세보기 이동

#### 업로드 모달
**입력 필드**
- 코기 선택 (드롭다운)
- 캡션 작성
- 사진 업로드

**검증**
- 필수 항목 확인
- 파일 형식 검증

#### 상세보기 페이지
**구성**
- 코기 이름 (제목)
- 작성자 닉네임
- 작성일
- 좋아요 수
- 큰 이미지 표시
- 캡션 전체 내용
- 좋아요 버튼
- 목록으로 버튼

**댓글 섹션**
- 댓글 수 표시
- 댓글 작성 폼
- 댓글 목록
  - 작성자 닉네임
  - 작성일
  - 내용
  - 삭제 버튼 (본인만)

---

### 📋 코기talk 게시판 (board.php)

#### 목록 페이지
**필터 섹션**
- 카테고리 선택
- 키워드 검색
- 검색 버튼

**게시글 목록**
- 카드형 레이아웃
- 좌측: 이미지 썸네일 (150x150px)
- 우측: 게시글 정보
  - 카테고리 배지
  - 제목
  - 내용 미리보기
  - 작성자 닉네임
  - 코기 이름 (있는 경우)
  - 작성일
  - 조회수

**기능**
- 글쓰기 버튼 (모달)
- 페이지 클릭 시 상세보기

#### 작성 모달
**입력 필드**
- 제목
- 제품명 (카테고리)
- 코기 선택 (선택사항)
- 내용
- 이미지 업로드 (선택사항)

#### 상세보기 페이지
**헤더**
- 카테고리
- 제목
- 작성자, 날짜, 조회수

**본문**
- 이미지 (있는 경우)
- 내용 전체

**액션**
- 목록으로 버튼
- 수정 버튼 (작성자만)
- 삭제 버튼 (작성자만)

**댓글 섹션**
- 댓글 수 표시
- 댓글 작성 폼
- 댓글 목록

---

### 🖼️ 코기갤러리 (gallery.php)

#### 목록 페이지
**레이아웃**
- 3열 그리드
- 정사각형 이미지
- 무한 스크롤 가능

**카드 구성**
- 정사각형 이미지
- 코기 이름
- 작성자 닉네임
- 좋아요 수

**기능**
- 사진 올리기 버튼 (모달)
- 카드 클릭 시 상세보기

#### 업로드 모달
**입력 필드**
- 코기 선택
- 캡션
- 사진 업로드

**검증**
- 파일 크기 (최대 5MB)
- 파일 형식 (jpg, png, gif)

#### 상세보기 페이지
**구성**
- 코기 이름
- 작성자
- 작성일
- 좋아요 수
- 큰 이미지
- 캡션
- 좋아요 버튼
- 목록으로 버튼

**댓글 섹션**
- 엉덩코기와 동일

---

### 🧪 코기테스트 (test.php)

#### 메인 화면
**테스트 선택**
- 3개의 테스트 카드
- 각 카드:
  - 이모지 아이콘
  - 테스트 제목
  - 설명

**테스트 종류**
1. **애착 유형 테스트**
   - 보호자와 반려견의 애착 관계 분석
   
2. **코기 MBTI 테스트**
   - 반려견의 성격 유형 파악
   
3. **보호자 유형 테스트**
   - 양육 스타일 분석

#### 테스트 진행 화면
**구성**
- 테스트 제목 및 설명
- 질문 카드
  - 질문 번호
  - 질문 내용
  - 선택지 (라디오 버튼)
- 제출 버튼

**인터랙션**
- 선택지 hover 효과
- 미선택 시 제출 방지

#### 결과 화면
**구성**
- 큰 이모지 아이콘
- 결과 타입 (제목)
- 부제목
- 상세 설명
- 액션 버튼
  - 다시 하기
  - 홈으로

**디자인**
- 그라데이션 배경
- 중앙 정렬
- 애니메이션 효과

---

## 디자인 시스템

### 색상 팔레트

#### 메인 컬러
- **Primary Orange**: `#e67e4d` (코기 오렌지)
- **Primary Dark**: `#d85a3c` (진한 오렌지)
- **Primary Light**: `#fff5f0` (연한 오렌지)
- **Gradient**: `linear-gradient(135deg, #e67e4d 0%, #d85a3c 100%)`

#### 배경
- **Main BG**: `#faf8f3` (크림색)
- **Dot Pattern**: `rgba(135, 206, 250, 0.3)` (하늘색 점)
- **Card BG**: `#ffffff` (흰색)

#### 텍스트
- **Primary Text**: `#333333`
- **Secondary Text**: `#666666`
- **Gray Text**: `#999999`

#### 상태 컬러
- **Success**: `#d4edda` (연한 녹색)
- **Error**: `#f8d7da` (연한 빨간색)
- **Border**: `#e0e0e0` (연한 회색)

### 타이포그래피

#### 폰트 패밀리
- **본문**: Gumi (한글 전용 폰트)
- **제목/강조**: GumiRomance (한글 전용 폰트)
- **Fallback**: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif

#### 폰트 크기
- **헤더 로고**: 38px
- **페이지 제목**: 32px
- **섹션 제목**: 24px
- **카드 제목**: 18px
- **본문**: 14-16px
- **메타 정보**: 12-13px

### UI 컴포넌트

#### 버튼
**기본 버튼**
- 배경: 오렌지 그라데이션
- 텍스트: 흰색
- 패딩: 12px~15px
- 테두리 반경: 8px~10px
- Hover: 위로 2px 이동 + 그림자

**보조 버튼**
- 배경: 흰색
- 테두리: 오렌지
- 텍스트: 오렌지
- Hover: 오렌지 배경

#### 카드
**기본 스타일**
- 배경: 흰색
- 테두리 반경: 12px
- 그림자: `0 2px 10px rgba(0,0,0,0.08)`
- Hover: 위로 5px 이동 + 진한 그림자

**MVP 카드 (순위)**
- 순위 배지: 좌측 상단
- 금메달: 금색 그라데이션
- 은메달: 은색 그라데이션
- 동메달: 동색 그라데이션

#### 모달
- 배경 오버레이: `rgba(0,0,0,0.5)`
- 컨텐츠: 흰색 카드
- 최대 너비: 700px
- 애니메이션: 페이드인 + 슬라이드업

#### 입력 필드
- 테두리: 2px solid `#e0e0e0`
- 테두리 반경: 8px~10px
- 패딩: 12px~15px
- Focus: 오렌지 테두리

### 레이아웃

#### 그리드 시스템
**갤러리/엉덩코기**
- 데스크톱: 3열
- 태블릿: 3열
- 모바일: 3열 (작은 크기)

**게시판**
- 목록: 1열 (가로 배치)
- 이미지 + 내용 조합

#### 간격
- 섹션 간격: 25px~50px
- 카드 간격: 10px~20px
- 내부 패딩: 15px~40px

---

## 반응형 구현

### 브레이크포인트
- **데스크톱**: 769px 이상
- **태블릿**: 481px ~ 768px
- **모바일**: 480px 이하

### 헤더 변화

#### 데스크톱
- 로고 (120px 높이)
- 환영 메시지 표시
- 로그아웃 버튼
- 가로 네비게이션 메뉴

#### 태블릿
- 로고 (85px 높이)
- 환영 메시지 숨김
- 로그아웃 버튼 (우측 상단 고정)
- 햄버거 메뉴 표시

#### 모바일
- 로고 (65px 높이)
- 환영 메시지 숨김
- 로그아웃 버튼 (우측 상단 고정)
- 햄버거 메뉴 표시

### 네비게이션

#### 모바일 메뉴
**특징**
- 우측에서 슬라이드 인
- 너비: 280px
- 오버레이 배경
- 세로 메뉴 레이아웃
- 닫기 버튼

**인터랙션**
- 햄버거 아이콘 클릭 → 메뉴 열림
- 오버레이 클릭 → 메뉴 닫힘
- 닫기 버튼 클릭 → 메뉴 닫힘
- 메뉴 열림 시 스크롤 방지

### 그리드 조정

#### 갤러리/엉덩코기
- **데스크톱**: 3열, 20px 간격
- **태블릿**: 3열, 10px 간격
- **모바일**: 3열, 8px 간격
- 이미지: 모두 정사각형 유지

#### 게시판
- **모든 화면**: 가로 배치 유지
- **데스크톱**: 이미지 150x150px
- **태블릿**: 이미지 120x120px
- **모바일**: 이미지 100x100px

### 텍스트 조정

#### 폰트 크기
- 제목: 모바일에서 축소
- 본문: 약간 축소
- 메타 정보: 더 작게

#### 여백 조정
- 패딩: 모바일에서 감소
- 마진: 모바일에서 감소
- 간격: 모바일에서 감소

---

## 애니메이션 효과

### Lottie 애니메이션

#### 잔디 배경 (헤더/푸터)
- 파일: `Moving_Grass.json`
- 위치: 전체 배경
- 반복: 무한
- 자동 재생

#### 달리는 코기 (헤더/푸터)
- 파일: `Cute_Doggie.json`
- 위치: 하단
- 반복: 무한
- 애니메이션: 좌→우 이동 (15초)
- 좌우 반전 적용

### CSS 애니메이션

#### 페이드인
- 투명도: 0 → 1
- 시간: 0.3초

#### 슬라이드업
- 위치: 50px 아래 → 0
- 투명도: 0 → 1
- 시간: 0.3초

#### 바운스인 (배지)
- 크기: 0 → 1.2 → 1
- 투명도: 0 → 1
- 시간: 0.6초

#### 호버 효과
- 카드: 위로 5px 이동
- 버튼: 위로 2px 이동
- 그림자 강화
- 시간: 0.3초

### JavaScript 애니메이션

#### 슬라이더
- 자동 슬라이드: 5초 간격
- 전환 효과: 0.5초
- 인디케이터 동기화

#### 토스트 알림
- 슬라이드인: 우측에서 등장
- 표시 시간: 3초
- 슬라이드아웃: 우측으로 퇴장

---

## 데이터베이스 구조

### 테이블 목록

#### 1. users (사용자)
**필드**
- user_id (PK, AUTO_INCREMENT)
- email (UNIQUE, NOT NULL)
- password (NOT NULL) - bcrypt 해시
- name (NOT NULL) - 실명
- nickname (UNIQUE, NOT NULL) - 게시판용
- created_at (TIMESTAMP)

**용도**
- 회원 정보 저장
- 로그인 인증

#### 2. corgis (코기 정보)
**필드**
- corgi_id (PK, AUTO_INCREMENT)
- user_id (FK → users)
- corgi_name (NOT NULL)
- created_at (TIMESTAMP)

**용도**
- 사용자별 코기 정보
- 게시글/사진과 연결

#### 3. butt_corgi (엉덩코기)
**필드**
- butt_id (PK, AUTO_INCREMENT)
- user_id (FK → users)
- corgi_id (FK → corgis)
- photo_path (VARCHAR)
- caption (TEXT)
- likes_count (INT, DEFAULT 0)
- created_at (TIMESTAMP)

**용도**
- 엉덩코기 사진 저장
- 좋아요 카운트

#### 4. size_posts (게시판)
**필드**
- post_id (PK, AUTO_INCREMENT)
- user_id (FK → users)
- corgi_id (FK → corgis, NULL 가능)
- title (VARCHAR, NOT NULL)
- content (TEXT, NOT NULL)
- product_name (VARCHAR) - 카테고리
- image_path (VARCHAR)
- views (INT, DEFAULT 0)
- created_at (TIMESTAMP)

**용도**
- 게시판 글 저장
- 조회수 추적

#### 5. mvp_gallery (갤러리)
**필드**
- gallery_id (PK, AUTO_INCREMENT)
- user_id (FK → users)
- corgi_id (FK → corgis)
- photo_path (VARCHAR)
- caption (TEXT)
- likes_count (INT, DEFAULT 0)
- created_at (TIMESTAMP)

**용도**
- 일반 갤러리 사진
- 좋아요 카운트

#### 6. comments (댓글) - 추정
**필드**
- comment_id (PK, AUTO_INCREMENT)
- post_type (ENUM) - 'butt', 'gallery', 'board'
- post_id (INT)
- user_id (FK → users)
- content (TEXT)
- created_at (TIMESTAMP)

**용도**
- 모든 게시물의 댓글 통합 관리

### 관계도
```
users (1) ─────── (N) corgis
  │                    │
  │                    │
  ├─── (N) butt_corgi ──┘
  │
  ├─── (N) size_posts ──┐
  │                     │
  ├─── (N) mvp_gallery ─┤
  │                     │
  └─── (N) comments ────┘
```

---

## 주요 함수 및 기능

### config.php 함수

#### 보안 함수
- `clean()` - XSS 방지 (HTML 특수문자 변환)
- `escape_sql()` - SQL Injection 방지

#### 인증 함수
- `is_logged_in()` - 로그인 상태 확인
- `require_login()` - 로그인 필수 페이지 체크

#### 포맷 함수
- `format_date()` - 날짜 포맷 (Y년 m월 d일)
- `format_datetime()` - 날짜시간 포맷 (Y-m-d H:i)

#### 렌더링 함수
- `render_header()` - HTML 헤더
- `render_common_header()` - 공통 헤더 (로그인 후)
- `render_navigation()` - 네비게이션
- `render_footer()` - 푸터

### JavaScript 기능

#### 초기화
- `initCommon()` - 공통 기능
- `initHamburgerMenu()` - 모바일 메뉴
- `initGallery()` - 갤러리 전용
- `initBoard()` - 게시판 전용

#### 유틸리티
- `showToast()` - 토스트 알림
- `formatDate()` - 날짜 포맷
- `timeAgo()` - 상대 시간 표시
- `confirmAction()` - 확인 대화상자

#### 검증
- 파일 크기 체크 (5MB)
- 파일 형식 체크 (이미지)
- 필수 항목 체크

---

## 보안 고려사항

### 구현된 보안 기능
1. **비밀번호 암호화** - bcrypt 해시
2. **XSS 방지** - htmlspecialchars 적용
3. **SQL Injection 방지** - Prepared Statements
4. **세션 기반 인증** - 서버 측 검증
5. **파일 업로드 검증** - 크기/형식 제한

### 추가 권장사항
- CSRF 토큰 추가
- Rate Limiting (브루트포스 방지)
- 파일 이름 랜덤화
- 이미지 리사이징
- HTTPS 적용 (프로덕션)

---

## 향후 개선 사항

### 기능 추가
- [ ] 이메일/비밀번호 찾기
- [ ] 회원 프로필 수정
- [ ] 알림 시스템
- [ ] 친구/팔로우 기능
- [ ] 메시지 시스템
- [ ] 신고 기능

### 성능 최적화
- [ ] 이미지 최적화 (WebP)
- [ ] 썸네일 자동 생성
- [ ] 페이지네이션
- [ ] 무한 스크롤
- [ ] 데이터베이스 인덱싱
- [ ] 캐싱 (Redis)

### UX 개선
- [ ] 로딩 스피너
- [ ] 스켈레톤 UI
- [ ] 에러 핸들링 강화
- [ ] 오프라인 지원 (PWA)

### 관리 기능
- [ ] 관리자 페이지
- [ ] 통계 대시보드
- [ ] 사용자 관리
- [ ] 콘텐츠 관리

---

## 라이선스 및 크레딧

### 사용된 라이브러리
- **Lottie**: MIT License
  - Moving Grass 애니메이션
  - Cute Doggie 애니메이션

### 폰트
- **Gumi**: 구미시 제공
- **GumiRomance**: 구미시 제공

### 개발 정보
- **개발자**: 이이섬
- **연락처**: wpqtqwqq8877@naver.com
- **전화**: 010-2547-1299
- **주소**: 혁신대로 443

---

## 버전 정보
- **현재 버전**: 1.0.0
- **최종 업데이트**: 2024
